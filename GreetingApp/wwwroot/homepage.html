﻿<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <!--<link rel="stylesheet" type="text/css" href="Main.css" />-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <title>Home</title>
</head>
<body style="background-image:url(image.jpg)">
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark ">
        <div class="collapse navbar-collapse " id="nav">
            <ul class="navbar-nav ">
                <li class="nav-item">
                    <a href="home.html" class="nav-link">Home</a>
                </li>
                <li class="nav-item">
                    <a href="registration.html" class="nav-link">Registration</a>
                </li>
                <li class="nav-item">
                    <a href="login.html" class="nav-link">Login</a>
                </li>
            </ul>
        </div>
    </nav>
    <<div class="container">
        <div class="dropdown">
            <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                &emsp;
                Add Employee
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
                <li>
                    <label for="name">Name: &emsp;&nbsp;&nbsp;</label>
                    <input type="text" id="addname" placeholder="Enter Employee Name"><br><br>
                </li>
                <li>
                    <label for="addemail">Email: &emsp;&nbsp;&nbsp;</label>
                    <input type="text" id="addemail" placeholder="Enter Email"><br><br>
                </li>
                <li>
                    <label for="addpwd">Password:</label>
                    <input type="text" id="addpwd" placeholder="Enter Password"><br><br>
                </li>
                <li>
                    <label for="mobile">Mobile:</label>
                    <input type="text" id="addmobile" placeholder="Enter Mobile"><br><br>
                </li>
                <li>
                    <label for="address">Address:</label>
                    <input type="text" id="addaddress" placeholder="Enter Address"><br><br>
                </li>

                <li>
                    &emsp;&nbsp;<button type="submit" class="btn btn-primary" id="adddatabtn">Add Data</button>
                </li>
            </ul>
        </div>
    </div>
    <br />

    <div class="container">
        <div class="dropdown">
            <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                &emsp;&emsp;&nbsp;
                Update  &emsp;&nbsp;&nbsp;
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
                <li>
                    <label for="uei">employeeID:&emsp;&nbsp;&nbsp;</label>
                    <input type="text" id="uei" placeholder="Enter Employee Id"><br><br>
                </li>
                <li>
                    <label for="name">Name: &emsp;&nbsp;&nbsp;</label>
                    <input type="text" id="uname" placeholder="Enter Employee Name"><br><br>
                </li>
                <li>
                    <label for="addemail">Email: &emsp;&nbsp;&nbsp;</label>
                    <input type="text" id="uaddemail" placeholder="Enter Email"><br><br>
                </li>
                <li>
                    <label for="addpwd">Password:</label>
                    <input type="text" id="uaddpwd" placeholder="Enter Password"><br><br>
                </li>
                <li>
                    <label for="mobile">Mobile:</label>
                    <input type="text" id="umobile" placeholder="Enter Mobile"><br><br>
                </li>
                <li>
                    <label for="address">Address:</label>
                    <input type="text" id="uaddress" placeholder="Enter Address"><br><br>
                </li>
                <li>
                    &emsp;&nbsp;<button type="submit" class="btn btn-primary" id="updatebtn">Update Detail</button>
                </li>
            </ul>
        </div>
    </div>&nbsp&nbsp&nbsp;

    <div class="container">
        <div class="dropdown">
            <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                &emsp;&emsp;
                Delete &emsp;&emsp;
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
                <li>
                    <label for="dei">Emp Id:&emsp;&nbsp;&nbsp;</label>
                    <input type="text" id="dei" placeholder="Enter Employee Id"><br><br>

                </li>
                <li>
                    &emsp;&nbsp;<button type="submit" class="btn btn-primary" id="deletebtn">Delete Employee</button>
                </li>
            </ul>
        </div>
    </div>
    <br />
    <div class="container">
        <table class="table table-hover bg-light" id="tblEmployee">
            <thead>
                <tr>
                    <th>Employee Id</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>password</th>
                    <th>mobile</th>
                    <th>Address</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $.ajax({
                type: "GET",
                url: "/api/Employee",
                dataType: "json",
                method: 'post',
                success: function (data) {
                    var employeeTable = $('#tblEmployee tbody');
                    employeeTable.empty();
                    $(data).each(function (index, emp) {
                        employeeTable.append('<tr><td>' +emp.empID +'</td><td>' + emp.name + '</td><td>' + emp.email + '</td><td>' + emp.password + '</td><td>' + emp.mobile + '</td><td>' + emp.address + '</td></tr>');

                    });
                },
                error: function (err) {
                    alert(err);
                }
            });
        });
    </script>

    <script type="text/javascript">
        $('#adddatabtn').click(function () {
            var employee = {};
            employee.name = $('#addname').val();
            employee.Email = $('#addemail').val();
            employee.Password = $('#addpwd').val();
            employee.mobile = $('#addmobile').val();
            employee.address = $('#addaddress').val();
            console.log(JSON.stringify(employee))
            $.ajax({
                type: "POST",
                url: "/api/Employee",
                data: JSON.stringify(employee),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                processData: true,
                success: function (data) {
                    alert("Employee Added Successfully" + data);
                },
                error: function (data) {
                    alert("fill all details");
                }
            });
        });
    </script>
    <script type="text/javascript">
        $('#updatebtn').click(function () {
            var uemployee = {};
            uemployee.Empid = parseInt($('#uei').val());
            uemployee.name = $('#uname').val();
            uemployee.Email = $('#uemail').val();
            uemployee.Password = $('#upassword').val();
            uemployee.mobile = $('umobile').val();
            uemployee.address = $('uaddress').val();
            console.log(JSON.stringify(uemployee))
            $.ajax({
                type: "PUT",
                url: "/api/Employee/UpdateEmployee",
                data: JSON.stringify(uemployee),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                processData: true,
                success: function (data) {
                    alert("Employee Details Updated" + data);
                },
                error: function (data) {
                    alert("fill all details correctly");
                }
            });
        });
    </script>

    <script>
        $('#deletebtn').click(function () {
            var a = $('#dei').val();
            $.ajax({
                type: "DELETE",
                url: "/api/Employee/" + a,
                dataType: "json",
                success: function (data) {
                    alert("Data Deleted " + data);
                },
                error: function (xhr) {
                    alert(xhr.responseText);
                }
            });
        });
    </script>
</body>
</html> 